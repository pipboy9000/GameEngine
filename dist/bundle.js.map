{"version":3,"sources":["webpack:///webpack/bootstrap 68024afd8410692f9391","webpack:///./js/canvas.js","webpack:///./js/lines.js","webpack:///./js/input.js","webpack:///./js/level.js","webpack:///./js/main.js","webpack:///./js/player.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AC7DA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC9EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AClNA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0DAAgB;;;;;;;;;;AChFhB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,EAAE;AACL;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yEAAuB,yBAAyB;AAChD,iFAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,WAAW;;AAEX;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 68024afd8410692f9391","import input from \"./input\";\r\n\r\nvar canvas;\r\nvar ctx;\r\nvar width, height;\r\n\r\nvar zoom = 1;\r\nvar targetZoom = 1;\r\n\r\nvar camPosX = 0;\r\nvar targetCamPosX = 0;\r\n\r\nvar camPosY = 0;\r\nvar targetCamPosY = 0;\r\n\r\nfunction init() {\r\n  console.log(\"init canvas\");\r\n  canvas = document.getElementById(\"canvas\");\r\n  width = canvas.width;\r\n  height = canvas.height;\r\n  ctx = canvas.getContext(\"2d\");\r\n  ctx.fillStyle = \"black\";\r\n  ctx.strokeStyle = \"#ff0000\";\r\n}\r\n\r\nfunction clearCanvas() {\r\n  ctx.fillStyle = \"black\";\r\n  ctx.fillRect(0, 0, width, height);\r\n}\r\n\r\nfunction draw() {\r\n  if (input.keyboard.ControlLeft) {\r\n    setZoom(2);\r\n  }\r\n\r\n  if (!input.keyboard.ControlLeft) {\r\n    setZoom(1);\r\n  }\r\n\r\n  zoom += (targetZoom - zoom) / 10;\r\n  camPosX += (targetCamPosX - camPosX) / 10;\r\n  camPosY += (targetCamPosY - camPosY) / 10;\r\n\r\n  ctx.setTransform(zoom, 0, 0, zoom, -camPosX + 300, -camPosY + 300);\r\n}\r\n\r\nfunction setZoom(z) {\r\n  targetZoom = z;\r\n}\r\n\r\nfunction getZoom() {\r\n  return zoom;\r\n}\r\n\r\nfunction setCamPos(x, y) {\r\n  targetCamPosX = x;\r\n  targetCamPosY = y;\r\n}\r\n\r\nfunction getCamPos() {\r\n  return { x: camPosX, y: camPosY };\r\n}\r\n\r\ninit();\r\n\r\nexport default {\r\n  canvas,\r\n  ctx,\r\n  width,\r\n  height,\r\n  clearCanvas,\r\n  draw,\r\n  setZoom,\r\n  getZoom,\r\n  getCamPos,\r\n  setCamPos,\r\n  camPosX,\r\n  camPosY\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/canvas.js\n// module id = 0\n// module chunks = 0","import canvas from \"./canvas\";\r\n\r\nfunction getLine(x1, y1, x2, y2) {\r\n  var m = (y2 - y1) / (x2 - x1);\r\n  var b = y1 - m * x1;\r\n  var midX = x1 + (x2 - x1) / 2;\r\n  var midY = y1 + (y2 - y1) / 2;\r\n  var normal = {\r\n    x: -(y2 - y1),\r\n    y: x2 - x1\r\n  };\r\n  var vec = {\r\n    x: x2 - x1,\r\n    y: y2 - y1\r\n  };\r\n  normal = normalize(normal);\r\n  return {\r\n    x1,\r\n    y1,\r\n    x2,\r\n    y2,\r\n    m,\r\n    b,\r\n    normal,\r\n    midX,\r\n    midY,\r\n    vec\r\n  };\r\n}\r\n\r\n// x = (y-b) / m\r\nfunction getX(line, y) {\r\n  return y - line.b / line.m;\r\n}\r\n\r\n// y = mx + b\r\nfunction getY(line, x) {\r\n  return line.m * x + line.b;\r\n}\r\n\r\nfunction getOrthogonal(vec) {\r\n  return {\r\n    x: -vec.y,\r\n    y: vec.x\r\n  };\r\n}\r\n\r\nfunction normalize(vec) {\r\n  var len = Math.sqrt(vec.x * vec.x + vec.y * vec.y);\r\n  if (len) {\r\n    return {\r\n      x: vec.x / len,\r\n      y: vec.y / len\r\n    };\r\n  } else {\r\n    return {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n  }\r\n}\r\n\r\nfunction getVec(line) {\r\n  return {\r\n    x: line.x2 - line.x1,\r\n    y: line.y2 - line.y1\r\n  };\r\n}\r\n\r\nfunction precisionRound(number, precision) {\r\n  var factor = Math.pow(10, precision);\r\n  return Math.round(number * factor) / factor;\r\n}\r\n\r\nfunction dotProduct(v1, v2) {\r\n  return v1.x * v2.x + v1.y * v2.y;\r\n}\r\n\r\nfunction getProj(v1, v2) {\r\n  var a = getVec(v1);\r\n  var b = getVec(v2);\r\n  var dp = dotProduct(a, b);\r\n  var x = dp / (b.x * b.x + b.y * b.y) * b.x;\r\n  var y = dp / (b.x * b.x + b.y * b.y) * b.y;\r\n\r\n  //   var proj = getLine(v2.x1, v2.y1, v2.x1 + x, v2.y1 + y);\r\n  var proj = getLine(0, 0, x, y);\r\n  return proj;\r\n}\r\n\r\nfunction drawLine(line, color, width) {\r\n  if (color) canvas.ctx.strokeStyle = color;\r\n  if (width) canvas.ctx.lineWidth = width;\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.moveTo(line.x1, line.y1);\r\n  canvas.ctx.lineTo(line.x2, line.y2);\r\n  canvas.ctx.stroke();\r\n}\r\n\r\nfunction drawPoint(p, color, width) {\r\n  if (color) canvas.ctx.strokeStyle = color;\r\n  if (width) canvas.ctx.lineWidth = width;\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.arc(p.x, p.y, 10, 0, Math.PI * 2);\r\n  canvas.ctx.stroke();\r\n}\r\n\r\nfunction drawVec(vec, x, y, line, color, width) {\r\n  if (color) canvas.ctx.strokeStyle = color;\r\n  if (width) canvas.ctx.lineWidth = width;\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.moveTo(x, y);\r\n  canvas.ctx.lineTo(x + vec.x, y + vec.y);\r\n  canvas.ctx.stroke();\r\n}\r\n\r\nfunction isAbove(line, x, y) {\r\n  return getX(line, y) <= x;\r\n}\r\n\r\nfunction getIntersection(line1, line2) {\r\n  //lines ar orthogonal\r\n  if (line1.m === Infinity && line2.m === 0) {\r\n    var l = line1;\r\n    line1 = line2;\r\n    line2 = l;\r\n  }\r\n\r\n  if (line1.m === 0 && line2.m === Infinity) {\r\n    var intersectX = line2.x1;\r\n    var intersectY = line1.y1;\r\n    if (\r\n      ((intersectY < line2.y2 && intersectY >= line2.y1) ||\r\n        (intersectY > line2.y2 && intersectY <= line2.y1)) &&\r\n      ((intersectX > line1.x1 && intersectX <= line1.x2) ||\r\n        (intersectX < line1.x1 && intersectX >= line1.x2))\r\n    ) {\r\n      return {\r\n        x: intersectX,\r\n        y: intersectY\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (line1.m === -Infinity && line2.m === 0) {\r\n    var l = line1;\r\n    line1 = line2;\r\n    line2 = l;\r\n  }\r\n\r\n  if (line1.m === 0 && line2.m === -Infinity) {\r\n    var intersectX = line2.x1;\r\n    var intersectY = line1.y1;\r\n    if (\r\n      ((intersectY < line2.y2 && intersectY >= line2.y1) ||\r\n        (intersectY > line2.y2 && intersectY <= line2.y1)) &&\r\n      ((intersectX > line1.x1 && intersectX <= line1.x2) ||\r\n        (intersectX < line1.x1 && intersectX >= line1.x2))\r\n    ) {\r\n      return {\r\n        x: intersectX,\r\n        y: intersectY\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  var a1 = line1.y2 - line1.y1;\r\n  var b1 = line1.x1 - line1.x2;\r\n  var c1 = a1 * line1.x1 + b1 * line1.y1;\r\n\r\n  var a2 = line2.y2 - line2.y1;\r\n  var b2 = line2.x1 - line2.x2;\r\n  var c2 = a2 * line2.x1 + b2 * line2.y1;\r\n\r\n  var denominator = a1 * b2 - b1 * a2;\r\n  if (denominator === 0) return false;\r\n\r\n  var intersectX = (b2 * c1 - b1 * c2) / denominator;\r\n  var intersectY = (a1 * c2 - a2 * c1) / denominator;\r\n\r\n  if (\r\n    ((intersectX >= line1.x1 && intersectX <= line1.x2) ||\r\n      (intersectX <= line1.x1 && intersectX >= line1.x2)) &&\r\n    ((intersectX >= line2.x1 && intersectX <= line2.x2) ||\r\n      (intersectX <= line2.x1 && intersectX >= line2.x2))\r\n  ) {\r\n    return {\r\n      x: intersectX,\r\n      y: intersectY\r\n    };\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default {\r\n  getLine,\r\n  drawLine,\r\n  getIntersection,\r\n  dotProduct,\r\n  getVec,\r\n  getProj,\r\n  getOrthogonal,\r\n  drawVec,\r\n  normalize,\r\n  getX,\r\n  getY,\r\n  isAbove,\r\n  drawPoint\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/lines.js\n// module id = 1\n// module chunks = 0","import canvas from \"./canvas\";\r\n\r\nvar keyboard = {};\r\n\r\nvar mouse = {\r\n  x: 0,\r\n  y: 0,\r\n  left: false,\r\n  right: false,\r\n  middle: false\r\n};\r\n\r\nfunction getMousePos(evt) {\r\n  var rect = canvas.canvas.getBoundingClientRect();\r\n  var camPos = canvas.getCamPos();\r\n  mouse.x = (evt.clientX - rect.left + camPos.x - 300) / canvas.getZoom();\r\n  mouse.y = (evt.clientY - rect.top + camPos.y - 300) / canvas.getZoom() ;\r\n  console.log(mouse.x, mouse.y);\r\n}\r\n\r\nfunction mouseDown(evt) {\r\n  switch (evt.button) {\r\n    case 0:\r\n      mouse.left = true;\r\n      break;\r\n\r\n    case 1:\r\n      mouse.middle = true;\r\n      break;\r\n\r\n    case 2:\r\n      mouse.right = true;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction mouseUp(evt) {\r\n  switch (evt.button) {\r\n    case 0:\r\n      mouse.left = false;\r\n      break;\r\n\r\n    case 1:\r\n      mouse.middle = false;\r\n      break;\r\n\r\n    case 2:\r\n      mouse.right = false;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction init() {\r\n  console.log(\"init input\");\r\n  document.addEventListener(\"keydown\", function(event) {\r\n    keyboard[event.code] = true;\r\n  });\r\n\r\n  document.addEventListener(\"keyup\", function(event) {\r\n    keyboard[event.code] = false;\r\n  });\r\n\r\n  //mouse\r\n  canvas.canvas.addEventListener(\r\n    \"mousemove\",\r\n    function(evt) {\r\n      getMousePos(evt);\r\n    },\r\n    false\r\n  );\r\n\r\n  canvas.canvas.addEventListener(\"mousedown\", mouseDown);\r\n  canvas.canvas.addEventListener(\"mouseup\", mouseUp);\r\n  canvas.canvas.oncontextmenu = function(e) {\r\n    e.preventDefault();\r\n  };\r\n}\r\n\r\ninit();\r\n\r\nexport default { keyboard, mouse };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/input.js\n// module id = 2\n// module chunks = 0","import canvas from \"./canvas\";\r\nimport lines from \"./lines\";\r\n\r\nvar wallsData = [\r\n  {\r\n    x1: 300,\r\n    y1: 50,\r\n    x2: 550,\r\n    y2: 300\r\n  },\r\n  {\r\n    x1: 550,\r\n    y1: 300,\r\n    x2: 300,\r\n    y2: 550\r\n  },\r\n  {\r\n    x1: 300,\r\n    y1: 550,\r\n    x2: 50,\r\n    y2: 50\r\n  },\r\n  {\r\n    x1: 50,\r\n    y1: 50,\r\n    x2: 300,\r\n    y2: 50\r\n  },\r\n  {\r\n    x1: 350,\r\n    y1: 270,\r\n    x2: 300,\r\n    y2: 250\r\n  },\r\n  {\r\n    x1: 300,\r\n    y1: 250,\r\n    x2: 250,\r\n    y2: 300\r\n  },\r\n  {\r\n    x1: 250,\r\n    y1: 300,\r\n    x2: 350,\r\n    y2: 270\r\n  }\r\n];\r\n\r\nvar walls = [];\r\n\r\nfunction checkCol(x, y, vx, vy, rad) {\r\n  // var dp;\r\n  var radSqr = rad * rad;\r\n  var colLine;\r\n  var n = lines.normalize({\r\n    x: vx,\r\n    y: vy\r\n  }); //normalized vx,vy\r\n  var colPoint;\r\n  var colPoints = [];\r\n  var res = { x: 0, y: 0 };\r\n\r\n  //check walls first\r\n  walls.forEach(wall => {\r\n    colLine = lines.getLine(\r\n      x,\r\n      y,\r\n      x + -wall.normal.x * rad,\r\n      y + -wall.normal.y * rad\r\n    );\r\n\r\n    colPoint = lines.getIntersection(wall, colLine);\r\n    if (colPoint) {\r\n      lines.drawPoint(colPoint);\r\n      var moveBackX = colPoint.x - colLine.x2;\r\n      var moveBackY = colPoint.y - colLine.y2;\r\n      colPoints.push({\r\n        x: moveBackX,\r\n        y: moveBackY\r\n      });\r\n    }\r\n  });\r\n\r\n  if (colPoints.length > 0) {\r\n    colPoints.forEach(p => {\r\n      res.x += p.x;\r\n      res.y += p.y;\r\n    });\r\n    return res;\r\n  }\r\n\r\n  //check vertices\r\n  walls.forEach(wall => {\r\n    var dx = wall.x1 - x;\r\n    var dy = wall.y1 - y;\r\n\r\n    if (dx * dx + dy * dy <= radSqr) {\r\n      lines.drawPoint({ x: wall.x1, y: wall.y1 }, \"red\", 3);\r\n      var l = lines.normalize({ x: dx, y: dy });\r\n      l.x *= rad;\r\n      l.y *= rad;\r\n      colPoints.push({\r\n        x: dx - l.x,\r\n        y: dy - l.y\r\n      });\r\n    }\r\n  });\r\n\r\n  if (colPoints.length > 0) {\r\n    colPoints.forEach(p => {\r\n      res.x += p.x;\r\n      res.y += p.y;\r\n    });\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction draw() {\r\n  walls.forEach(wall => {\r\n    canvas.ctx.beginPath();\r\n    canvas.ctx.strokeStyle = \"orange\";\r\n    canvas.ctx.moveTo(wall.x1, wall.y1);\r\n    canvas.ctx.lineTo(wall.x2, wall.y2);\r\n    canvas.ctx.stroke();\r\n\r\n    //normal\r\n    canvas.ctx.beginPath();\r\n    canvas.ctx.moveTo(wall.midX, wall.midY);\r\n    canvas.ctx.lineTo(\r\n      wall.midX + wall.normal.x * 20,\r\n      wall.midY + wall.normal.y * 20\r\n    );\r\n    canvas.ctx.stroke();\r\n  });\r\n}\r\n\r\nfunction getWall(idx) {\r\n  return walls[idx];\r\n}\r\n\r\nfunction getWalls() {\r\n  return walls;\r\n}\r\n\r\nfunction init() {\r\n  wallsData.forEach(wallData => {\r\n    var wall = lines.getLine(\r\n      wallData.x1,\r\n      wallData.y1,\r\n      wallData.x2,\r\n      wallData.y2\r\n    );\r\n    walls.push(wall);\r\n  });\r\n}\r\n\r\ninit();\r\n\r\nexport default {\r\n  draw,\r\n  checkCol,\r\n  getWalls,\r\n  getWall\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/level.js\n// module id = 3\n// module chunks = 0","import input from \"./input\";\r\nimport canvas from \"./canvas\";\r\nimport lines from \"./lines\";\r\nimport player from \"./player\";\r\nimport level from \"./level\";\r\n\r\nconst FPS = 10;\r\nvar interval = 1000 / FPS;\r\nvar lastFrame = performance.now();\r\n\r\nvar line;\r\n\r\nfunction gameLoop(time) {\r\n  canvas.clearCanvas();\r\n\r\n  //calculate delta time\r\n  var dt = time - lastFrame;\r\n  lastFrame = time;\r\n\r\n  dt /= 16; //normalize\r\n\r\n  player.move(dt);\r\n\r\n  canvas.draw();\r\n  level.draw();\r\n  player.draw();\r\n\r\n  var playerPos = player.getXY();\r\n\r\n  window.requestAnimationFrame(gameLoop);\r\n}\r\n\r\nfunction init() {\r\n  gameLoop(performance.now());\r\n}\r\n\r\nfunction ready(fn) {\r\n  if (document.readyState != \"loading\") {\r\n    fn();\r\n  } else {\r\n    document.addEventListener(\"DOMContentLoaded\", fn);\r\n  }\r\n}\r\n\r\nready(init);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/main.js\n// module id = 4\n// module chunks = 0","import canvas from \"./canvas\";\r\nimport input from \"./input\";\r\nimport lines from \"./lines\";\r\nimport level from \"./level\";\r\n\r\nvar x, y;\r\nvar vx, vy;\r\nvar pushVec;\r\nvar dir;\r\nvar rad;\r\nvar speed;\r\nvar acc = 1.5; //acceleration\r\nvar maxSpeed = 5;\r\nvar colVec;\r\n\r\nfunction init() {\r\n  x = canvas.canvas.width / 2;\r\n  y = canvas.canvas.height / 2;\r\n  vx = 0;\r\n  vy = 0;\r\n  rad = 30;\r\n  speed = 0;\r\n}\r\n\r\nfunction getDir() {\r\n  return Math.atan2(x - input.mouse.x, y - input.mouse.y);\r\n}\r\n\r\nfunction move(dt) {\r\n  dir = getDir();\r\n\r\n  var push = false;\r\n\r\n  pushVec = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  if (input.keyboard.KeyW) {\r\n    pushVec.x += -Math.sin(dir);\r\n    pushVec.y += -Math.cos(dir);\r\n    push = true;\r\n  }\r\n\r\n  if (input.mouse.left) {\r\n    pushVec.x += -Math.sin(dir);\r\n    pushVec.y += -Math.cos(dir);\r\n    push = true;\r\n  }\r\n\r\n  if (input.keyboard.KeyA) {\r\n    pushVec.x += Math.sin(dir - Math.PI / 2);\r\n    pushVec.y += Math.cos(dir - Math.PI / 2);\r\n    push = true;\r\n  }\r\n\r\n  if (input.keyboard.KeyD) {\r\n    pushVec.x += Math.sin(dir + Math.PI / 2);\r\n    pushVec.y += Math.cos(dir + Math.PI / 2);\r\n    push = true;\r\n  }\r\n\r\n  if (input.keyboard.KeyS) {\r\n    pushVec.x += Math.sin(dir);\r\n    pushVec.y += Math.cos(dir);\r\n    push = true;\r\n  }\r\n\r\n  pushVec = lines.normalize(pushVec);\r\n\r\n  if (push) {\r\n    vx += pushVec.x * acc;\r\n    vy += pushVec.y * acc;\r\n  } else {\r\n    if (Math.abs(vx) < 0.1) vx = 0;\r\n    if (Math.abs(vy) < 0.1) vy = 0;\r\n  }\r\n\r\n  vx *= dt;\r\n  vy *= dt;\r\n\r\n  vx *= 0.857;\r\n  vy *= 0.857;\r\n\r\n  x += vx;\r\n  y += vy;\r\n\r\n  var moveBack = level.checkCol(x, y, vx, vy, rad);\r\n  if (moveBack) {\r\n    x += moveBack.x;\r\n    y += moveBack.y;\r\n  }\r\n\r\n  canvas.setCamPos(x, y);\r\n}\r\n\r\nfunction draw() {\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.strokeStyle = \"green\";\r\n  canvas.ctx.lineWidth = 3;\r\n  canvas.ctx.arc(x, y, rad, 0, Math.PI * 2);\r\n  canvas.ctx.stroke();\r\n\r\n  //mouse look\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.moveTo(x, y);\r\n  canvas.ctx.strokeStyle = \"white\";\r\n  canvas.ctx.lineTo(x - Math.sin(dir) * rad, y - Math.cos(dir) * rad);\r\n  canvas.ctx.stroke();\r\n\r\n  canvas.ctx.beginPath();\r\n  canvas.ctx.moveTo(x, y);\r\n  canvas.ctx.strokeStyle = \"red\";\r\n  canvas.ctx.lineTo(x, y);\r\n  canvas.ctx.stroke();\r\n}\r\n\r\nfunction getXY() {\r\n  return { x, y };\r\n}\r\n\r\ninit();\r\n\r\nexport default {\r\n  draw,\r\n  move,\r\n  getXY,\r\n  colVec\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/player.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}